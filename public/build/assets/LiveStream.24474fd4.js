import{r as s,b as g,a as r,j as a,F as x}from"./app.9e598114.js";import{F as v}from"./Front.167c3130.js";import{_ as n}from"./Translate.dc83ae5b.js";import w from"./ChatRoom.d3dfdfb1.js";import b from"./VideoJs.34098433.js";import y from"./StreamInstructions.1444b46d.js";import"./index.esm.04772378.js";import"./iconBase.4930b98a.js";import"./index.esm.c83823d4.js";import"./index.esm.98b0ee44.js";import"./transition.955527f9.js";import"./Modal.81f47e62.js";import"./react-toastify.esm.d2e42348.js";import"./TextInput.b942e667.js";import"./index.esm.487ec2bb.js";import"./TipPopup.a40c08a4.js";import"./PrimaryButton.683939b2.js";import"./InputLabel.b1adb635.js";import"./Textarea.ca4513c0.js";import"./NumberInput.e1e227a5.js";import"./SecondaryButton.b66e07c5.js";import"./react-tooltip.esm.min.22bc2cab.js";/* empty css                      */function D({isChannelOwner:R,streamUser:t,roomName:o}){var m;const[p,l]=s.exports.useState(t.live_status!=="online"),[d,u]=s.exports.useState(!0),{auth:i}=g().props;console.info(`${route("home")}/livestreams/${o}.m3u8`);const f=s.exports.useRef(null),c={autoplay:!1,controls:!0,responsive:!0,fill:!0,preload:"auto",fluid:!0,sources:[{src:`${route("home")}/livestreams/${o}.m3u8`,type:"application/x-mpegURL"}]},h=e=>{f.current=e,e.on("waiting",()=>{console.log("player is waiting")}),e.on("dispose",()=>{console.log("player will dispose")})};return s.exports.useEffect(()=>{window.Echo.channel("LiveStreamRefresh").listen(".livestreams.refresh",e=>{console.log("refresh livestreams"),Inertia.reload()}),window.Echo.channel(`room-${t.username}`).listen(".livestream.started",e=>{l(!1)}).listen(".livestream.refresh",e=>{}).listen(".livestream.stopped",e=>{l(!0)})},[]),r(v,{extraHeader:!0,extraHeaderTitle:n("@:username's Live Stream",{username:t.username}),extraHeaderImage:"/images/live-stream-icon.png",extraImageHeight:"h-10",children:a("div",{className:"sm:-mt-[70px] -mt-[110px] flex max-w-7xl flex-col lg:flex-row lg:justify-between items-start h-fit",children:[r("div",{className:"w-full h-full",children:p?r(y,{streamKey:o,streamUser:t.username}):a(x,{children:[t.username===((m=i==null?void 0:i.user)==null?void 0:m.username)&&a("div",{className:`${d?"flex":"hidden"} mb-3 mt-5 lg:mt-0 p-3 bg-white dark:bg-zinc-800 dark:text-white text-indigo-700 font-medium`,children:[n("If you just started streaming in OBS, refresh this page after 30 seconds to see your stream."),r("button",{className:"ml-2 border-b border-indigo-700 dark:border-white",onClick:e=>u(!1),children:n("Close message")})]}),r(b,{options:c,onReady:h})]})}),r(w,{streamer:t})]})})}export{D as default};
